import cv2
import os

save_dir = './dataset/images/train'
os.makedirs(save_dir, exist_ok=True)

# ğŸ’¡ ë°±ì—”ë“œ ì—†ì´ ì¹´ë©”ë¼ ID 0ë§Œ ì‚¬ìš©
cap = cv2.VideoCapture(0)

if not cap.isOpened():
    print("âŒ ì¹´ë©”ë¼ë¥¼ ì—´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
    exit()

img_id = 0
print("ğŸ“¸ 's' í‚¤: ì´ë¯¸ì§€ ì €ì¥ / 'q' í‚¤: ì¢…ë£Œ")

while True:
    ret, frame = cap.read()
    if not ret:
        print("âŒ í”„ë ˆì„ì„ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
        break

    cv2.imshow("Webcam View", frame)

    key = cv2.waitKey(1)
    if key == ord('s'):
        filepath = os.path.join(save_dir, f"img_{img_id:04}.jpg")
        cv2.imwrite(filepath, frame)
        print(f"âœ… ì €ì¥ë¨: {filepath}")
        img_id += 1
    elif key == ord('q'):
        break

cap.release()
cv2.destroyAllWindows()
